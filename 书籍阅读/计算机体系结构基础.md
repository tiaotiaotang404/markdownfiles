## 第六章 计算机总线接口技术

### 6.1 总线概述

​		总线的本质作用是完成数据交换。

​		总线含义很广，它不仅仅是指用于数据交换的通道，有时也包含了软件硬件架构。

​		总线的含义分为以下几个层级：

​			（1）机械层。接口的外形、尺寸、信号排列、连线的长度范围等。

​			（2）电气层。信号描述、电源电压、电平标准、信号质量等。

​			（3）协议层。信号时序、握手规范、命令格式、出错处理等。

​			（4）架构层。硬件模型、软件架构等。

​		不同的总线包含的层级有所不同。

### 6.2 总线分类

​		按照数据传递的方向，可以分为单向总线和双向总线。

​		按照总线使用的信号类型，可以分为并行总线和串行总线。以串行方式为基础，使用多条串行总线进行数据传输的方式正在被广泛采用。多位串行总线与并行总线的根本差别在于，多位串行总线的每一个数据通道都是相对独立传输的，他们独立进行编码，在接收端恢复数据之后再进行并行数据之间的对齐，而并行总线使用同一个时钟对所有的数据线进行同时采样，因此对数据传输线之间的对齐有非常严格的要求。

​		按照在计算机系统中所处的物理位置，可以分为片上总线、内存总线、系统总线和设备总线。

### 6.3 片上总线

​		 片上总线是指芯片片内互连使用的总线。

​		目前业界公开的主流片上互连总线是ARM公司的AMBA系列总线。

​		高级微控制器总线架构（AMBA）系列总线包括AXI、AHB、ASB、APB等总线。

		1. AXI总线

​		高级可扩展接口（AXI）总线是一种高性能、高带宽、低延迟的片上总线。它的地址/控制和数据总线是分离的，支持不对齐的数据传输，同时在突发传送中只需要发送首地址即可。它采用分离的读写数据通道并支持乱序访问。AXI是AMBA3.0规范中引入的一个新的高性能协议，目标是满足超高性能和复杂的片上系统的设计需求。

>AXI总线详细介绍：[(29条消息) AMBA 系列之 AXI 总线协议_朽木橼子的博客-CSDN博客](https://blog.csdn.net/weixin_44139386/article/details/124596854)

2. AHB、ASB、APB总线

​		AHB总线是高性能系统总线，它的读写操作共用命令和响应通道，具有突发传输、事务分割、流水线操作、单周期总线主设备切换、非三态实现以及宽数据总线等特点。AHB协议允许8~1024位的数据总线宽度，但推荐的数据宽度最小为32位，最大位256位。

​		ASB是第一代AMBA系统总线，通AHB相比，它支持的数据宽度要小一些，典型的数据宽度为8位、16位、32位。它的主要特征有：流水线方式，数据突发传送，多总线主设备，内部有三态实现。

​		APB是本地二级总线，通过桥和AHB/ASB相连。它主要为了满足不需要高性能流水线接口或不需要高带宽接口的设备间的互连，主要优点是接口简单、易实现。

> [(29条消息) AMBA、AHB、APB、AXI总线介绍和对比_【ql君】qlexcel的博客-CSDN博客](https://blog.csdn.net/qlexcel/article/details/91378162)
>
> [(29条消息) AMBA、AHB、APB、AXI总线介绍及对比_luoganttcc的博客-CSDN博客](https://blog.csdn.net/luoganttcc/article/details/128393645)

### 6.4 内存总线

​		内存总线用于连接处理器和主存储器。

### 6.5 系统总线

​		系统总线通常用于处理器与桥片的连接，同时也作为多处理器间的连接以构成多路系统。

### 6.6 设备总线

​		设备总线用于计算机系统中与IO设备的连接。