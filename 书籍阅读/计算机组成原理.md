## 第一章   计算机系统概论

#### 1，计算机的性能指标

- 吞吐量：表征一台计算机在某一时间间隔内能够处理的信息量
- 相应时间：表征从输入有效到系统产生响应之间的时间度量，用时间单位来度量
- 利用率：在给定的时间间隔内系统被实际使用的时间所占的比例，用百分比表示
- 处理机字长：指处理机运算器中一次能够完成二进制数运算的位数，如32位，64位
- 总线宽度：一般指CPU中运算器与存储器之间进行互连的内部总线二进制位数
- 存储器容量：存储器中所有存储单元的总数目，通常用KB、MB、GB、TB来表示
- 存储器带宽：单位时间内从存储器读出的二进制数信息量，一般用字节数/秒表示
- 主频/时钟周期：CPU的工作节拍受主时钟控制，主时钟不断产生固定频率的时钟，主时钟的频率叫CPU的主频，度量单位是MHz、GHz。主频的倒数称为CPU时钟周期。
- CPU执行时间：表示CPU执行一般程序所占用的CPU时间

​			CPU执行时间=CPU时钟周期数✖CPU时钟周期

- CPI：表示每条指令的周期数，即执行一条指令所需的平均时钟周期数

​			CPI=执行某段程序所需的CPU时钟周期数➗程序包含的指令条数

- MIPS：表示平均每秒执行多少百万条定点指令数

​			MIPS=指令数➗（程序执行时间✖10<sup>6</sup>）

- FLOPS：表示每秒执行浮点操作的次数，用于衡量机器浮点操作的性能

​			FLOPS=程序中的浮点操作次数➗程序执行时间（s）

#### 2，计算机的硬件

<img src="C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230629204336243.png" alt="image-20230629204336243" style="zoom:25%;" />

1. 运算器
2. 存储器

​		半导体存储器称为内存储器，简称内存；存储容量更大的磁盘存储器和光盘存储器称为外存储器

3. 控制器

​		**存储程序并按地址顺序执行，这就是冯·诺伊曼型计算机的设计思想；**

​		**讲指令和数据放在同一个存储器，称为冯·诺伊曼型结构，如果将指令和数据分别放在两个存储器中，称为哈佛结构；**

4. 适配器和输入/输出设备
5. 总线

## 第二章   运算方法和运算器

#### 1，浮点数的机器表示

![image-20230629212229359](C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230629212229359.png)





## 第三章 存储系统

### 3.1 存储系统概述

#### 3.1.1 存储系统的层次结构

​		为了解决存储系统的成本和性能之间的矛盾，采用存储器分层策略。

​		存储器分层策略，即利用不同容量、成本、功耗和速度的多种存储器构成有机结合的多级存储系统。

​		构成多级存储系统的依据——程序的局部性原理。

1. 程序的局部性原理

​		在某一段时间内频繁访问某一局部的存储地址空间，而对此范围以外的地址空间则很少访问的现象称为程序局部性原理。

​		（1）时间局部性：最近被访问的信息很可能还要被访问。

​		（2）空间局部性：最近被访问的信息邻近地址的信息也可能被访问。

2. 多级存储系统的组成

​		CPU内部有少量的寄存器可以存储正在执行的指令或正在参加运算的数据，寄存器的访问速度非常块，但数量较少，这种狭义的存储器就是**内存**。**内存速度高、容量小、价格高，由半导体器件构成**。

​		为了扩大存储容量，在内存之外增加容量更大但访问速度稍慢的外存。**外存速度低、容量大、价格便宜，可以由非半导体器件或者固态半导体半导体存储器构成**。

​		CPU不能之间访问外存，外存的信息必须调入内存后才能由CPU处理。

​		随着发展，人们在常规内存与CPU之间增加了速度更高但容量更小的半导体高速缓冲存储器，即**cache，用于存放常规内存中正在使用的一些信息块的副本**。常规的内存被称为主存。

<img src="C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230714112334909.png" alt="image-20230714112334909" style="zoom:50%;" />

#### 3.1.3 存储器的端模式

​		当一个存储字的字长高于八位时，就存在一个存储字内部的多字节排列顺序问题，排列方式称为端模式。

​		大端模式：将一个字的高有效字节放在内存的低地址端，低有效字节放在内存的高地址端；

​		小端模式与之相反。





### 3.6 cache存储器

#### 3.6.1 cache基本原理

1. cache的功能：是一种高速缓冲存储器，为了解决CPU和主存之间速度不匹配而采用的一种重要技术。原理基于程序的局部性原理。
2. cache的基本原理：

​		CPU与cache之间的数据交换以字为单位，而cache与主存之间的数据交换以块为单位，

​		当CPU读取内存中的一个字时，便发出此字的内存地址到cache和主存。此时，cache控制逻辑依据地址判断此字当前是否在cache中，若是，则cache命中，此字立即传给CPU；若非，则cache缺失（未命中），用主存读周期把此字从主存读出到CPU，同时将含有此字的整个数据块从主存读出送到cache中。

4. cache结构设计需解决的问题

​		cache设计需遵循的两个原则：（1）希望cache的命中率尽可能高，接近于1；（2）希望cache对CPU而言是透明的，即不论是否由有cache，CPU访存的方式都是一样的，软件不需增加任何指令即可访问cache。

​		设计结构时需要解决的问题：

​		（1）主存的内容调入cache时如何存放？

​		（2）访存时如何找到cache中的信息？

​		（3）当cache空间不足时如何替换cache中已有的内容？

​		（4）需要写操作时如何改写cache的内容？

5. 主存与cache的地址映射

​		（1）全相联映射方式

​		（2）直接相联映射方式

​		（3）组相联映射方式

> [(29条消息) 【计算机组成】Cache与CPU的直接映射、全相联映射与组相联映射_cache组相联映射_性感博主在线瞎搞的博客-CSDN博客](https://blog.csdn.net/qq_41884002/article/details/131047943?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2~default~YuanLiJiHua~Position-2-131047943-blog-125485606.235^v38^pc_relevant_yljh&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~YuanLiJiHua~Position-2-131047943-blog-125485606.235^v38^pc_relevant_yljh&utm_relevant_index=5)

6. cache的替换策略

​		cache的工作原理要求它尽量保存最新数据。硬件实现的常用算法：

​		（1）最不经常使用（LFU）算法

​		将一段时间内被访问次数最少的那行数据换出。每行设置一个计数器，新行调入之后从0开始计数，每访问一次，被访问的行计数器加一，当需要替换时，将计数器值最小的行换出，同时将各行计数器清零。

​		（2）近期最少使用（LRU）算法

​		将近期内长久未被访问过的行换出。每行设置一个计数器，cache每命中一次，命中行计数器清零，其他各行计数器加一，当需要替换时，将计数值最大的行换出。此算法保护了刚复制到cache中的新数据行，符合cache工作原理，使cache有较高的命中率。

​		（3）随机替换

​		从特定的行位置中随机的选取一行换出即可。硬件上容易实现，速度比前两种快，缺点是随意换出的数据很可能马上又要使用，从而降低命中率和工作效率，但此不足随着cache容量增大而减小。

7. cache的写操作策略

​		cache的内容只是主存内容的副本，应当与主存内容保持一致。CPU对cache的写入更改了cache的内容，如何与主存内容保持一致，策略如下：

​		（1）写回法：当CPU写cache命中时，只修改cache的内容，而不立即写入主存；只当此行被换出时才写回主存。这种写cache与写主存异步进行的方式可以显著减少写主存次数，但存在不一致的隐患。

​		（2）全写法：当cache命中时，cache与主存同时发生写修改，较好的维护了两者的内容一致性。当未命中时，只能直接向主存进行写入。此法缺点是cache对CPU向主存的写操作无高速缓冲功能，降低了cache的性能。

​		（3）写一次法：写命中与写未命中的处理方式和写回法基本相同，只是第一次写命中时要写回主存。
