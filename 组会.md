### 实现iringbuf：

验证：将subw指令注释，运行测试文件string.c，运行结果如下，成功输出错误指令前的16条指令。

![image-20230525202338178](C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230525202338178.png)

### 一键回归测试

通过修改abstract-machine/scripts/platform/nemu.mk文件实现，测试结果如下。

<img src="C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230525205027373.png" alt="image-20230525205027373"  />



### 编写RV32I单周期CPU

#### 进度：根据数电实验十和数电实验十一进行RV32I单周期CPU的编写

电路图如下：

![image-20230602151507209](C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230602151507209.png)

​		我将整个系统一共分为了十二个模块，目前已经完成了所有模块的编写，通过了chisel的编译证明代码语法没有错误，但还没有进行功能验证

​		功能验证方式：找到了之前学习的教程，其中的项目可以进行chiselTest测试，即可以直接在chisel编辑器中编写测试文件进行单个模块功能的验证，也可以将测试代码导入chisel工程中进行系统功能的验证（教程中就采用这种方式进行测试）

​		这种方式相较于将chisel转换为Verilog后再借用verilator工具进行测试更为方便

#### 目前问题：系统的时序设计还没完成，功能测试还没做

​		通过顶层模块将各个功能模块连接以后进行编译后报错，报错内容如下：

![image-20230602153141340](C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230602153141340.png)

​		说我的顶层模块存在组合逻辑循环，即无法在单个时钟周期内完成各个模块的功能，是时序逻辑有问题，故编译没有通过

#### 计划：

#### 添加系统的时序逻辑设计

#### 学习如何使用chiselTest功能，编写测试文件完成每个单独模块的功能测试，完成整个系统的功能测试



### 进度：

### 解决了遇到的组合逻辑闭环的错误，添加了时序逻辑设计，将系统代码翻译为了verilog

### 遇到的问题：

#### 1，chiselTest不好用，需要自己将所有的输出情况预测到，通过测试文件给模块输入，再通过输出的结果与自己预测的结果对比来验证正确与否，并且只支持单时钟电路的测试。

#### 2，将chisel翻译为Verilog代码，翻译过程是平行的，即翻译的结果是得到许多个相互独立的模块，我的顶层模块中的连线操作并没有被翻译出来，所以翻译过后还需要自己进行手动连线，比较麻烦。

#### 3，想通过翻译出来的verilog代码生成系统的RTL电路，但在分析综合时报错，还没解决。

### 计划：

#### 1，生成RTL电路图

#### 2，系统的功能测试还是通过使用verilator运行测试程序的方式进行

#### 3，针对翻译后的verilog代码都是独立的模块，还需要自己手动进行连线的操作的问题，可能有相关的工具没找到，或者可以学习一个脚本语言实现自动连线的功能，在后续的学习中可以避免类似问题



