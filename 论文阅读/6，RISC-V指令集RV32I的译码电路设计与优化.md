### 1 译码电路整体方案

#### 1.1 RV32I指令特点

​		文章将指令分为九类：R型、I型装载（I_L）、I型计算（I_C）、JALR、S型、B型、LUI、AUIPC和JAL

​		仅需操作码的高5位，功能码3与功能码7的次高位共9位（inst[30|14:12|6:2]）即可唯一确定指令。

#### 1.2 整体框架设计

​		文章的指令译码电路分为主译码电路和程序计数器输入选择译码电路。

<img src="C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230713205506504.png" alt="image-20230713205506504" style="zoom: 50%;" />

### 2 指令译码电路设计

#### 2.1 主译码电路

​		主译码电路采用两级设计，功能是指令译码并输出除PCSel之外的控制信号。分为主译码器、流水线寄存器、ALU控制器与子译码器四个部分。

![image-20230713205859303](C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230713205859303.png)

1. 主译码器设计充分利用无关项化简组合逻辑。操作码的高5位对应2<sup>5</sup>共32种逻辑组合，而文章只将指令分为了九种，故利用无关项化简，减少确定一种指令所需的信号数量，各指令主类型仅需2至3位输入，有效降低了逻辑复杂度。

​		另外主译码器采用多级译码的方式，先生成ALU操作码（ALUOp）控制ALU控制器，再生成信号控制ALU，以减少主译码器规模，降低控制单元延迟。

2. ALU控制器

​		ALU控制器的信号生成全部采用组合逻辑。

3. 子译码器

4. 流水线寄存器

​		此寄存器可以与取值/译码阶段流水线寄存器合并，使得中间信号以及立即数生成器模式选择信号与译码阶段信号同步。

​		流水线寄存器将主译码电路分割为两部分，采取二级流水线结构，以增加寄存器的代价提高电路工作频率。同时最早的控制信号产生是在译码/执行阶段，因此不会导致主译码电路发生流水线冲突与阻塞。

#### 2.2 PCSel译码电路

​		功能是根据指令类型确定更新PC的方式。

![image-20230713211850616](C:\Users\张云鑫\AppData\Roaming\Typora\typora-user-images\image-20230713211850616.png)

​		电路由分支比较器和外围电路组成。分支比较器的常用实现方式是利用ALU的减法功能实现，文章设立了独立的分支比较器，优势：（1）规避了B型指令的流水线阻塞。（2）降低电路复杂度，减少延迟。ALU减法常见实现方式是32位的超前借位减法器，电路复杂，且需要对减法运算得到的结果进行进一步的比较才可输出最后结果。